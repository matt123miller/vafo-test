---
import Breadcrumbs from "@/components/Breadcrumbs.astro";
import Button from "@/components/Button.astro";
import VafoImageCarousel from "@/components/carousel/VafoImageCarousel.web.astro";
import ProductDetails from "@/components/ProductDetails.web.astro";
import ProductLayout from "@/layouts/ProductLayout.astro";

const breadcrumbs = [
  { title: "Shop all", url: "/products" },
  { title: "Dry Dog Food", url: "/products/dry-food" },
  {
    title: "Health & Digestion Dry Food",
    url: "/products/dry-food/health-and-digestion",
  },
];
---

<ProductLayout>
  <div class="product-layout">
    <div class="product-layout__breadcrumbs">
      <Breadcrumbs items={breadcrumbs} />
    </div>
    <div class="product-layout__images">
      <VafoImageCarousel>
        {
          [
            "/vafo-test/image-packaging.png",
            "/vafo-test/image-ingredients.png",
            "/vafo-test/image-kibble.png",
          ].map((src, i) => (
            <img src={src} alt="Product image" data-index={i} />
          ))
        }
      </VafoImageCarousel>
    </div>
    <form class="product-layout__form">
      <ProductDetails
        product={{
          name: "Health & Digestion Dry Food",
          price: 8.49,
        }}
      />
      <div class="product-layout__add-to-cart">
        <Button theme="primary" class="product-layout__add-to-cart-button">
          Add to Cart
        </Button>
      </div>
    </form>
  </div>
</ProductLayout>

<style>
  .breadcrumbs {
    grid-area: breadcrumbs;
  }

  .images {
    grid-area: images;
  }

  .details {
    grid-area: details;
  }

  .add-to-cart {
    grid-area: add-to-cart;
  }

  .product-layout {
  }
  .product-layout {
    display: grid;
    grid-template-columns: var(--grid-columns);
    column-gap: var(--grid-gutter);
    padding-inline: var(--grid-margin);

    grid-auto-flow: row;
    grid-template-areas:
      "breadcrumbs breadcrumbs breadcrumbs breadcrumbs breadcrumbs breadcrumbs"
      "images images images images images images"
      "details details details details details details";
  }

  .product-layout__breadcrumbs,
  .product-layout__images,
  .product-layout__form,
  .product-layout__add-to-cart {
    grid-column: 1 / -1;
  }

  .product-layout__breadcrumbs {
    grid-area: breadcrumbs;
  }

  .product-layout__images {
    grid-area: images;

    margin-inline: calc(-1 * var(--spacing-6));
    width: calc(100% + var(--spacing-8));
  }

  .product-layout__form {
    grid-area: details;
  }

  .product-layout__add-to-cart {
    grid-area: add-to-cart;
  }

  .product-layout__form {
    display: static;
  }

  .product-layout__add-to-cart {
    position: sticky;
    bottom: 0;
    padding: var(--spacing-6);
    border-radius: var(--radius-medium) var(--radius-medium) 0 0;
    border-top: 1px solid var(--border-secondary);
    box-shadow: 0 -4px 12px var(--black-15);
    background-color: var(--surface-primary);
    z-index: 10;

    grid-column: 1 / -1;
    margin-inline: calc(-1 * var(--spacing-6));
    width: calc(100% + var(--spacing-9));
  }
  .product-layout__add-to-cart-button {
    width: 100%;
  }

  /* @media (min-width: 768px) {
    .product-layout__form {
      padding-bottom: 0;
    }

    .product-layout__add-to-cart {
      position: static;
    }
  } */

  @media (min-width: 1360px) {
    .product-layout {
      grid-template-columns: 6fr 3fr;
      grid-template-rows: 30px 1fr;
      grid-auto-flow: row;
      grid-template-areas:
        "images breadcrumbs"
        "images details";
    }

    .product-layout__add-to-cart {
      display: none;
    }
    .product-layout__images {
      margin-inline: 0;
      width: 100%;
    }
    /* 
    .product-layout__breadcrumbs {
      grid-column: 1 / 12;
    }
    .product-layout__images {
      grid-column: 2 / 7;
    }
    .product-layout__form {
      grid-column: 7 / -2;
    } */
  }
</style>
